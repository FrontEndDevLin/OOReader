<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	<div class="reader" id="reader">
		124
	</div>
	<!-- <script src="./js/jszip.min.js"></script>
	<script src="./js/epub.js"></script> -->
	
	<script src="./js/txt-reader-min.js"></script>
	<script>
		(() => {
			function getQueryVariable(variable) {
				var query = window.location.search.substring(1);
				var vars = query.split("&");
				for (var i = 0; i < vars.length; i++) {
					var pair = vars[i].split("=");
					if(pair[0] == variable){ return pair[1]; }
				}
				return(false);
			}
			
			let bookpath = getQueryVariable("bookpath");
			bookpath = "http://192.168.88.145:4449/s.txt";
			
			var reader = new TxtReader();
			
			reader.loadFile(bookpath)
			.progress(function(progress) {
			    // onProgress callback
			    // progress (number): task progress in Number value from 1-100
			})
			.then(function(response) {
				
			    // onComplete callback
			    // response.timeTaken (number): task time taken in millisecond
			    // response.result.lineCount (number): total line number
			    // response.result.scope (object): if you assigned an iterator, the iterator "this" scope can be accessed here
			})
			.catch(function(reason) {
				console.log(reason)
			    // onFail callback
			    // reason (string): failure reason
			});
		})();
	</script>
</body>
</html>